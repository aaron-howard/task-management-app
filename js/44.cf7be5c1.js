"use strict";(self["webpackChunktask_management_app"]=self["webpackChunktask_management_app"]||[]).push([[44],{44:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("h1",{staticClass:"text-h4 mb-4"},[e._v("Profile")])])],1),t("v-row",[t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-card",[t("v-card-title",[e._v("Profile Information")]),t("v-card-text",[t("div",{staticClass:"text-center mb-4"},[t("v-avatar",{staticClass:"mb-3",attrs:{size:"120"}},[e.user.photoURL?t("v-img",{attrs:{src:e.user.photoURL}}):t("v-icon",{attrs:{size:"60"}},[e._v("mdi-account")])],1),t("h2",{staticClass:"text-h5"},[e._v(e._s(e.user.displayName||"No Name"))]),t("p",{staticClass:"text-body-2 text--secondary"},[e._v(e._s(e.user.email))])],1),t("v-divider",{staticClass:"mb-4"}),t("div",{staticClass:"mb-3"},[t("strong",[e._v("User ID:")]),t("div",{staticClass:"text-caption"},[e._v(e._s(e.user.uid))])]),t("div",{staticClass:"mb-3"},[t("strong",[e._v("Email Verified:")]),t("v-chip",{attrs:{color:e.user.emailVerified?"success":"error",small:"","text-color":"white"}},[e._v(" "+e._s(e.user.emailVerified?"Yes":"No")+" ")])],1),t("div",{staticClass:"mb-3"},[t("strong",[e._v("Last Login:")]),t("div",{staticClass:"text-caption"},[e._v(e._s(e.formatDate(e.user.metadata?.lastSignInTime)))])]),t("div",{staticClass:"mb-3"},[t("strong",[e._v("Account Created:")]),t("div",{staticClass:"text-caption"},[e._v(e._s(e.formatDate(e.user.metadata?.creationTime)))])])],1)],1)],1),t("v-col",{attrs:{cols:"12",md:"8"}},[t("v-card",[t("v-card-title",[e._v("Account Settings")]),t("v-card-text",[t("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"Display Name",rules:e.nameRules,required:""},model:{value:e.form.displayName,callback:function(t){e.$set(e.form,"displayName",t)},expression:"form.displayName"}}),t("v-text-field",{attrs:{label:"Email",type:"email",rules:e.emailRules,required:"",disabled:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),t("v-text-field",{attrs:{label:"Current Password",type:"password","prepend-icon":"mdi-lock"},model:{value:e.form.currentPassword,callback:function(t){e.$set(e.form,"currentPassword",t)},expression:"form.currentPassword"}}),t("v-text-field",{attrs:{label:"New Password",type:"password","prepend-icon":"mdi-lock-plus",rules:e.passwordRules},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}}),t("v-text-field",{attrs:{label:"Confirm New Password",type:"password","prepend-icon":"mdi-lock-check",rules:e.confirmPasswordRules},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",disabled:!e.valid,loading:e.loading},on:{click:e.updateProfile}},[e._v(" Update Profile ")])],1)],1),t("v-card",{staticClass:"mt-4"},[t("v-card-title",[e._v("Danger Zone")]),t("v-card-text",[t("p",{staticClass:"text-body-2 mb-4"},[e._v(" Once you delete your account, there is no going back. Please be certain. ")]),t("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(t){e.showDeleteDialog=!0}}},[e._v(" Delete Account ")])],1)],1)],1)],1),t("v-dialog",{attrs:{"max-width":"400"},model:{value:e.showDeleteDialog,callback:function(t){e.showDeleteDialog=t},expression:"showDeleteDialog"}},[t("v-card",[t("v-card-title",[e._v("Delete Account")]),t("v-card-text",[t("p",[e._v("Are you sure you want to delete your account? This action cannot be undone.")]),t("v-text-field",{attrs:{label:"Type 'DELETE' to confirm",required:""},model:{value:e.deleteConfirmation,callback:function(t){e.deleteConfirmation=t},expression:"deleteConfirmation"}})],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:function(t){e.showDeleteDialog=!1}}},[e._v("Cancel")]),t("v-btn",{attrs:{color:"error",disabled:"DELETE"!==e.deleteConfirmation},on:{click:e.deleteAccount}},[e._v(" Delete Account ")])],1)],1)],1)],1)},r=[],o=a(353),i=a(556),l={name:"Profile",data(){return{valid:!1,loading:!1,showDeleteDialog:!1,deleteConfirmation:"",form:{displayName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""},nameRules:[e=>!!e||"Display name is required",e=>e.length>=2||"Display name must be at least 2 characters"],emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],passwordRules:[e=>!e||e.length>=6||"Password must be at least 6 characters"],confirmPasswordRules:[e=>!e||e===this.form.newPassword||"Passwords do not match"]}},computed:{...(0,o.L8)("auth",["user"])},watch:{user:{handler(e){e&&(this.form.displayName=e.displayName||"",this.form.email=e.email||"")},immediate:!0}},methods:{...(0,o.i0)("auth",["logout"]),async updateProfile(){if(this.$refs.form.validate()){this.loading=!0;try{const e=i.j2.currentUser;if(this.form.displayName!==e.displayName&&await e.updateProfile({displayName:this.form.displayName}),this.form.newPassword){if(!this.form.currentPassword)throw new Error("Current password is required to change password");const t=i.j2.EmailAuthProvider.credential(e.email,this.form.currentPassword);await e.reauthenticateWithCredential(t),await e.updatePassword(this.form.newPassword)}this.$toast.success("Profile updated successfully"),this.resetForm()}catch(e){this.$toast.error("Failed to update profile: "+e.message),console.error("Error updating profile:",e)}finally{this.loading=!1}}},async deleteAccount(){if("DELETE"===this.deleteConfirmation)try{const e=i.j2.currentUser;await e.delete(),this.$toast.success("Account deleted successfully"),await this.logout()}catch(e){this.$toast.error("Failed to delete account: "+e.message),console.error("Error deleting account:",e)}},resetForm(){this.form.currentPassword="",this.form.newPassword="",this.form.confirmPassword=""},formatDate(e){return e?new Date(e).toLocaleString():"Unknown"}}},c=l,n=a(656),d=(0,n.A)(c,s,r,!1,null,null,null),m=d.exports}}]);
//# sourceMappingURL=44.cf7be5c1.js.map