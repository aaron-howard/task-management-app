"use strict";(self["webpackChunktask_management_app"]=self["webpackChunktask_management_app"]||[]).push([[984],{984:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var s=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("div",{staticClass:"d-flex justify-space-between align-center mb-4"},[t("h1",{staticClass:"text-h4"},[e._v("Teams")]),t("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.showCreateDialog=!0}}},[t("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Create Team ")],1)],1)])],1),t("v-row",e._l(e.userTeams,function(a){return t("v-col",{key:a.id,attrs:{cols:"12",md:"6",lg:"4"}},[t("v-card",{staticClass:"team-card",attrs:{height:"200"}},[t("v-card-title",[t("div",{staticClass:"d-flex align-center"},[t("v-icon",{attrs:{left:""}},[e._v("mdi-account-group")]),e._v(" "+e._s(a.name)+" ")],1),t("v-spacer"),t("v-menu",{scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",s,!1),a),[t("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t("v-list",[t("v-list-item",{on:{click:function(t){return e.editTeam(a)}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-pencil")])],1),t("v-list-item-title",[e._v("Edit")])],1),t("v-list-item",{on:{click:function(t){return e.manageMembers(a)}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-account-multiple")])],1),t("v-list-item-title",[e._v("Manage Members")])],1),t("v-list-item",{on:{click:function(t){return e.deleteTeam(a)}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-delete")])],1),t("v-list-item-title",[e._v("Delete")])],1)],1)],1)],1),t("v-card-text",[t("p",{staticClass:"text-body-2 mb-3"},[e._v(e._s(a.description||"No description provided"))]),t("div",{staticClass:"d-flex align-center mb-2"},[t("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-account-multiple")]),t("span",{staticClass:"text-caption"},[e._v(e._s(a.members.length)+" members")])],1),t("div",{staticClass:"d-flex align-center"},[t("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-calendar")]),t("span",{staticClass:"text-caption"},[e._v("Created "+e._s(e.formatDate(a.createdAt)))])],1)]),t("v-card-actions",[t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.viewTeamTasks(a)}}},[e._v(" View Tasks ")]),t("v-spacer"),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.editTeam(a)}}},[e._v(" Manage ")])],1)],1)],1)}),1),t("TeamDialog",{attrs:{team:e.editingTeam},on:{save:e.handleTeamSave,close:e.closeDialog},model:{value:e.showCreateDialog,callback:function(t){e.showCreateDialog=t},expression:"showCreateDialog"}}),t("ManageMembersDialog",{attrs:{team:e.selectedTeam},on:{save:e.handleMembersSave,close:e.closeMembersDialog},model:{value:e.showMembersDialog,callback:function(t){e.showMembersDialog=t},expression:"showMembersDialog"}})],1)},i=[],r=a(353),l=function(){var e=this,t=e._self._c;return t("v-dialog",{attrs:{value:e.value,"max-width":"500",persistent:""},on:{input:function(t){return e.$emit("input",t)}}},[t("v-card",[t("v-card-title",[e._v(" "+e._s(e.isEditing?"Edit Team":"Create Team")+" ")]),t("v-card-text",[t("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"Team Name",rules:e.nameRules,required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("v-textarea",{attrs:{label:"Description",rows:"3"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t("v-btn",{attrs:{color:"primary",disabled:!e.valid,loading:e.loading},on:{click:e.saveTeam}},[e._v(" "+e._s(e.isEditing?"Update":"Create")+" ")])],1)],1)],1)},m=[],n={name:"TeamDialog",props:{value:{type:Boolean,default:!1},team:{type:Object,default:null}},data(){return{valid:!1,loading:!1,form:{name:"",description:""},nameRules:[e=>!!e||"Team name is required",e=>e.length>=3||"Team name must be at least 3 characters"]}},computed:{isEditing(){return!!this.team}},watch:{team:{handler(e){e?this.form={name:e.name||"",description:e.description||""}:this.resetForm()},immediate:!0}},methods:{resetForm(){this.form={name:"",description:""}},async saveTeam(){if(this.$refs.form.validate()){this.loading=!0;try{this.$emit("save",this.form)}catch(e){console.error("Error saving team:",e)}finally{this.loading=!1}}},closeDialog(){this.$emit("close"),this.resetForm()}}},o=n,c=a(656),d=(0,c.A)(o,l,m,!1,null,null,null),u=d.exports,v=function(){var e=this,t=e._self._c;return t("v-dialog",{attrs:{value:e.value,"max-width":"600"},on:{input:function(t){return e.$emit("input",t)}}},[e.team?t("v-card",[t("v-card-title",[t("v-icon",{attrs:{left:""}},[e._v("mdi-account-multiple")]),e._v(" Manage Members - "+e._s(e.team.name)+" ")],1),t("v-card-text",[t("v-form",{on:{submit:function(t){return t.preventDefault(),e.addMember.apply(null,arguments)}}},[t("v-text-field",{attrs:{label:"Add member by email","prepend-icon":"mdi-email",type:"email",rules:e.emailRules,required:""},model:{value:e.newMemberEmail,callback:function(t){e.newMemberEmail=t},expression:"newMemberEmail"}}),t("v-btn",{attrs:{color:"primary",disabled:!e.newMemberEmail||!e.isValidEmail,loading:e.addingMember},on:{click:e.addMember}},[e._v(" Add Member ")])],1),t("v-divider",{staticClass:"my-4"}),t("h3",{staticClass:"text-h6 mb-3"},[e._v("Current Members")]),t("v-list",e._l(e.team.members,function(a){return t("v-list-item",{key:a},[t("v-list-item-avatar",[t("v-icon",[e._v("mdi-account")])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(" "+e._s(e.getMemberName(a))+" ")]),t("v-list-item-subtitle",[e._v(" "+e._s(e.getMemberEmail(a))+" ")])],1),t("v-list-item-action",[t("v-btn",{attrs:{icon:"",color:"error",disabled:a===e.currentUserId},on:{click:function(t){return e.removeMember(a)}}},[t("v-icon",[e._v("mdi-delete")])],1)],1)],1)}),1),e.error?t("v-alert",{staticClass:"mt-4",attrs:{type:"error",dismissible:""},on:{input:e.clearError}},[e._v(" "+e._s(e.error)+" ")]):e._e()],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("input",!1)}}},[e._v(" Close ")]),t("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.$emit("save")}}},[e._v(" Save Changes ")])],1)],1):e._e()],1)},h=[],b={name:"ManageMembersDialog",props:{value:{type:Boolean,default:!1},team:{type:Object,default:null}},data(){return{newMemberEmail:"",addingMember:!1,error:null,emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"]}},computed:{...(0,r.L8)("auth",["user"]),currentUserId(){return this.user?.uid},isValidEmail(){return/.+@.+\..+/.test(this.newMemberEmail)}},methods:{...(0,r.i0)("teams",["addMemberToTeam","removeMemberFromTeam"]),async addMember(){if(this.isValidEmail){this.addingMember=!0,this.error=null;try{await this.addMemberToTeam({teamId:this.team.id,memberEmail:this.newMemberEmail}),this.newMemberEmail="",this.$toast.success("Member added successfully")}catch(e){this.error=e.message,this.$toast.error("Failed to add member: "+e.message)}finally{this.addingMember=!1}}},async removeMember(e){if(confirm("Are you sure you want to remove this member?"))try{await this.removeMemberFromTeam({teamId:this.team.id,userId:e}),this.$toast.success("Member removed successfully")}catch(t){this.$toast.error("Failed to remove member: "+t.message)}},getMemberName(e){return`User ${e.substring(0,8)}`},getMemberEmail(e){return`user${e.substring(0,8)}@example.com`},clearError(){this.error=null}}},p=b,f=(0,c.A)(p,v,h,!1,null,null,null),g=f.exports,_={name:"Teams",components:{TeamDialog:u,ManageMembersDialog:g},data(){return{showCreateDialog:!1,showMembersDialog:!1,editingTeam:null,selectedTeam:null}},computed:{...(0,r.L8)("teams",["userTeams"]),...(0,r.L8)("auth",["user"])},async mounted(){await this.initializeData()},methods:{...(0,r.i0)("teams",["fetchTeams","subscribeToTeams","createTeam","updateTeam","deleteTeam"]),async initializeData(){try{await this.fetchTeams(),this.subscribeToTeams()}catch(e){console.error("Error initializing teams:",e),this.$toast.error("Failed to load teams")}},editTeam(e){this.editingTeam=e,this.showCreateDialog=!0},manageMembers(e){this.selectedTeam=e,this.showMembersDialog=!0},async deleteTeam(e){if(confirm(`Are you sure you want to delete the team "${e.name}"?`))try{await this.deleteTeam(e.id),this.$toast.success("Team deleted successfully")}catch(t){this.$toast.error("Failed to delete team"),console.error("Error deleting team:",t)}},viewTeamTasks(e){this.$router.push({path:"/tasks",query:{team:e.id}})},async handleTeamSave(e){try{this.editingTeam?(await this.updateTeam({teamId:this.editingTeam.id,updates:e}),this.$toast.success("Team updated successfully")):(await this.createTeam(e),this.$toast.success("Team created successfully")),this.closeDialog()}catch(t){this.$toast.error("Failed to save team"),console.error("Error saving team:",t)}},async handleMembersSave(){try{await this.fetchTeams(),this.$toast.success("Members updated successfully"),this.closeMembersDialog()}catch(e){this.$toast.error("Failed to update members"),console.error("Error updating members:",e)}},closeDialog(){this.showCreateDialog=!1,this.editingTeam=null},closeMembersDialog(){this.showMembersDialog=!1,this.selectedTeam=null},formatDate(e){return new Date(e).toLocaleDateString()}}},T=_,M=(0,c.A)(T,s,i,!1,null,"75833a7c",null),y=M.exports}}]);
//# sourceMappingURL=984.95e0a433.js.map